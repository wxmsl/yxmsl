<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Currency Converter</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
        .container { padding: 20px; }
        .row { 
            display: flex; 
            align-items: center; 
            margin: 10px 0; 
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        select, input { 
            padding: 8px; 
            margin: 0 10px; 
            border: 1px solid #ddd; 
            border-radius: 4px; 
            font-size: 16px;
            width: 200px; /* 统一宽度 */
        }
        .flag { font-size: 1.5em; margin-right: 8px; }
        .currency-code { 
            font-weight: bold; 
            min-width: 70px; 
            font-size: 16px;
        }
        .rate { 
            font-size: 12px; 
            color: #999; 
            margin-left: 10px; 
        }
        .add-currency { 
            margin-top: 20px; 
            position: relative; 
            padding: 8px 0; 
            background-color: #f8f9fa; /* 稍深的背景颜色 */
            border-radius: 8px; /* 圆角 */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* 添加阴影 */
            padding: 10px;
        }
        .currency-text { 
            color: #666; 
            font-size: 12px; 
            margin-bottom: 5px; 
            display: block; 
            margin-left: 20px; /* 与下拉菜单左对齐 */
        }
        #addCurrencySelect { 
            padding: 8px; 
            font-size: 16px; 
            width: 200px; /* 统一宽度 */
            margin-left: 20px; /* 向右移动 */
        }
        .reset-button { 
            width: 100px; /* 设置固定宽度 */
            height: 40px; /* 与输入框一致 */
            padding: 0 16px; 
            background-color: #f0f0f0; /* 浅色背景 */
            color: #333; 
            border: 1px solid #ddd; 
            border-radius: 4px; /* 圆角 */
            cursor: pointer; 
            font-size: 16px; 
            display: inline-flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px; /* 确保按钮与下拉菜单对齐 */
        }
        .reset-button:hover {
            background-color: #e0e0e0; /* 悬停时背景色变深 */
        }
        .amount-input {
            width: 100px;
            text-align: center;
        }
    </style>
</head>
<body>
    
    <div style="text-align: center;">
    <span style="color: #808080;">欢迎使用汇率转换小工具</span><br>
    <a href="https://t.me/wxmsl" style="color: #B0C4DE;" target="_blank">@XMSL</a>
</div>
    
    <div class="container">
        <div class="row">
            <select id="baseCurrency"></select>
            <input type="number" id="amount" class="amount-input" value="1" step="0.01">
        </div>
        <div id="currencyList"></div>
        <div class="add-currency">
            <div class="currency-text">添加其他货币</div>
            <select id="addCurrencySelect" onchange="addCurrency()">
                <!-- 选项由JavaScript动态生成 -->
            </select>
            <button class="reset-button" onclick="reset()">重置</button>
        </div>
    </div>

    <script>
        const API_URL = 'https://api.exchangerate-api.com/v4/latest/USD';
        let rates = {};
        let currencies = ['CNY', 'HKD', 'USD', 'EUR', 'GBP', 'NGN']; // 默认显示货币
const CURRENCY_INFO = {
    AED: { symbol: 'د.إ', flag: '🇦🇪' }, // 阿联酋
    AFN: { symbol: '؋', flag: '🇦🇫' }, // 阿富汗
    ALL: { symbol: 'Lek', flag: '🇦🇱' }, // 阿尔巴尼亚
    AMD: { symbol: '֏', flag: '🇦🇲' }, // 亚美尼亚
    ANG: { symbol: 'ƒ', flag: '🇳🇱' }, // 荷兰安的列斯
    AOA: { symbol: 'Kz', flag: '🇦🇴' }, // 安哥拉
    AWG: { symbol: 'Afl', flag: '🇦🇼' }, // 阿鲁巴
    AZN: { symbol: '₼', flag: '🇦🇿' }, // 阿塞拜疆
    BAM: { symbol: 'KM', flag: '🇧🇦' }, // 波斯尼亚和黑塞哥维那
    BBD: { symbol: 'Bds$', flag: '🇧🇧' }, // 巴巴多斯
    BDT: { symbol: '৳', flag: '🇧🇩' }, // 孟加拉国
    BGN: { symbol: 'лв', flag: '🇧🇬' }, // 保加利亚
    BHD: { symbol: 'د.ب', flag: '🇧🇭' }, // 巴林
    BIF: { symbol: 'Fr', flag: '🇧🇮' }, // 布隆迪
    BMD: { symbol: '$', flag: '🇧🇲' }, // 百慕大
    BND: { symbol: '$', flag: '🇧🇳' }, // 文莱
    BOB: { symbol: 'Bs.', flag: '🇧🇴' }, // 玻利维亚
    BWP: { symbol: 'P', flag: '🇧🇼' }, // 博茨瓦纳
    BYN: { symbol: 'Br', flag: '🇧🇾' }, // 白俄罗斯
    BZD: { symbol: '$', flag: '🇧🇿' }, // 伯利兹
    BRL: { symbol: 'R$', flag: '🇧🇷' }, // 巴西
    BSD: { symbol: '$', flag: '🇧🇸' }, // 巴哈马
    BIN: { symbol: 'Fr', flag: '🇧🇮' }, // 贝尔哈
    CAD: { symbol: 'C$', flag: '🇨🇦' }, // 加拿大
    CDF: { symbol: 'Fr', flag: '🇨🇩' }, // 刚果（金）
    CHF: { symbol: 'CHF', flag: '🇨🇭' }, // 瑞士
    CLP: { symbol: '$', flag: '🇨🇱' }, // 智利
    CNY: { symbol: '¥', flag: '🇨🇳' }, // 中国
    COP: { symbol: '$', flag: '🇨🇴' }, // 哥伦比亚
    CRC: { symbol: '₡', flag: '🇨🇷' }, // 哥斯达黎加
    CUP: { symbol: '₱', flag: '🇨🇺' }, // 古巴
    CVE: { symbol: 'Esc', flag: '🇨🇻' }, // 佛得角
    CZK: { symbol: 'Kč', flag: '🇨🇿' }, // 捷克
    DJF: { symbol: 'Fdj', flag: '🇩🇯' }, // 吉布提
    DKK: { symbol: 'kr', flag: '🇩🇰' }, // 丹麦
    DOP: { symbol: 'RD$', flag: '🇩🇴' }, // 多米尼加共和国
    DZD: { symbol: 'د.ج', flag: '🇩🇿' }, // 阿尔及利亚
    EGP: { symbol: '£', flag: '🇪🇬' }, // 埃及
    ERN: { symbol: 'Nfk', flag: '🇪🇷' }, // 厄立特里亚
    ETB: { symbol: 'ታብ', flag: '🇪🇹' }, // 埃塞俄比亚
    EUR: { symbol: '€', flag: '🇪🇺' }, // 欧盟
    FJD: { symbol: '$', flag: '🇫🇯' }, // 斐济
    FKP: { symbol: '£', flag: '🇫🇰' }, // 福克兰群岛
    FOK: { symbol: 'kr', flag: '🇫🇴' }, // 法罗群岛
    GBP: { symbol: '£', flag: '🇬🇧' }, // 英国
    GEL: { symbol: '₾', flag: '🇬🇪' }, // 格鲁吉亚
    GGP: { symbol: '£', flag: '🇬🇬' }, // 根西岛
    GHS: { symbol: '₵', flag: '🇬🇭' }, // 加纳
    GIP: { symbol: '£', flag: '🇬🇮' }, // 直布罗陀
    GMD: { symbol: 'D', flag: '🇬🇲' }, // 冯比亚
    GNF: { symbol: 'Fr', flag: '🇬🇳' }, // 几内亚
    GTQ: { symbol: 'Q', flag: '🇬🇹' }, // 危地马拉
    GYD: { symbol: '$', flag: '🇬🇾' }, // 圭亚那
    HKD: { symbol: '$', flag: '🇭🇰' }, // 香港
    HTG: { symbol: 'G', flag: '🇭🇹' }, // 海地
    HNL: { symbol: 'L', flag: '🇭🇳' }, // 洪都拉斯
    HRK: { symbol: 'kn', flag: '🇭🇷' }, // 克罗地亚
    HUF: { symbol: 'Ft', flag: '🇭🇺' }, // 匈牙利
    IDR: { symbol: 'Rp', flag: '🇮🇩' }, // 印度尼西亚
    ILS: { symbol: '₪', flag: '🇮🇱' }, // 以色列
    IMP: { symbol: '£', flag: '🇮🇲' }, // 马恩岛
    INR: { symbol: '₹', flag: '🇮🇳' }, // 印度
    IRR: { symbol: '﷼', flag: '🇮🇷' }, // 伊朗
    ISK: { symbol: 'kr', flag: '🇮🇸' }, // 冰岛
    JMD: { symbol: '$', flag: '🇯🇲' }, // 牙买加
    JOD: { symbol: 'د.ا', flag: '🇯🇴' }, // 约旦
    JEP: { symbol: '£', flag: '🇯🇪' }, // 泽西岛
    JPY: { symbol: '¥', flag: '🇯🇵' }, // 日本
    KES: { symbol: 'KSh', flag: '🇰🇪' }, // 肯尼亚
    KGD: { symbol: '₸', flag: '🇰🇬' }, // 哈萨克斯坦
    KMF: { symbol: 'Fr', flag: '🇰🇲' }, // 科摩罗
    KHR: { symbol: '៛', flag: '🇰🇭' }, // 柬埔寨
    KID: { symbol: '$', flag: '🇰🇮' }, // 基里巴斯
    KWD: { symbol: 'د.ك', flag: '🇰🇼' }, // 科威特
    KYD: { symbol: '$', flag: '🇰🇾' }, // 开曼群岛
    KZT: { symbol: '₸', flag: '🇰🇿' }, // 哈萨克斯坦
    LAK: { symbol: '₭', flag: '🇱🇦' }, // 老挝
    LBP: { symbol: 'ل.ل', flag: '🇱🇧' }, // 黎巴嫩
    LKR: { symbol: '₨', flag: '🇱🇰' }, // 斯里兰卡
    LRD: { symbol: '$', flag: '🇱🇷' }, // 利比里亚
    LYD: { symbol: 'د.ل', flag: '🇱🇾' }, // 利比亚
    MAD: { symbol: 'د.م.', flag: '🇲🇦' }, // 摩洛哥
    MDL: { symbol: 'lei', flag: '🇲🇩' }, // 摩尔多瓦
    MGA: { symbol: 'Ar', flag: '🇲🇬' }, // 马达加斯加
    MKD: { symbol: 'ден', flag: '🇲🇰' }, // 马其顿
    MMK: { symbol: 'Ks', flag: '🇲🇲' }, // 缅甸
    MNT: { symbol: '₮', flag: '🇲🇳' }, // 蒙古
    MOP: { symbol: 'P', flag: '🇲🇴' }, // 澳门
    MRU: { symbol: 'UM', flag: '🇲🇷' }, // 毛里塔尼亚
    MUR: { symbol: '₨', flag: '🇲🇺' }, // 毛里求斯
    MVR: { symbol: 'MVR', flag: '🇲🇻' }, // 马尔代夫
    MWK: { symbol: 'MK', flag: '🇲🇼' }, // 马拉维
    MXN: { symbol: '$', flag: '🇲🇽' }, // 墨西哥
    MYR: { symbol: 'RM', flag: '🇲🇾' }, // 马来西亚
    MZN: { symbol: 'Mt', flag: '🇲🇿' }, // 莫桑比克
    NAD: { symbol: '$', flag: '🇳🇦' }, // 纳米比亚
    NPR: { symbol: '₨', flag: '🇳🇵' }, // 尼泊尔
    NIO: { symbol: 'C$', flag: '🇳🇮' }, // 尼加拉瓜
    NOK: { symbol: 'kr', flag: '🇳🇴' }, // 挪威
    NZD: { symbol: '$', flag: '🇳🇿' }, // 新西兰
    OMR: { symbol: 'ر.ع.', flag: '🇴🇲' }, // 阿曼
    PAB: { symbol: 'B/.', flag: '🇵🇦' }, // 巴拿马
    PEN: { symbol: 'S/.', flag: '🇵🇪' }, // 秘鲁
    PGK: { symbol: 'K', flag: '🇵🇬' }, // 巴布亚新几内亚
    PHP: { symbol: '₱', flag: '🇵🇭' }, // 菲律宾
    PKR: { symbol: '₨', flag: '🇵🇰' }, // 巴基斯坦
    PLN: { symbol: 'zł', flag: '🇵🇱' }, // 波兰
    PYG: { symbol: '₲', flag: '🇵🇾' }, // 巴拉圭
    QAR: { symbol: 'ر.ق', flag: '🇶🇦' }, // 卡塔尔
    RON: { symbol: 'lei', flag: '🇷🇴' }, // 罗马尼亚
    RSD: { symbol: 'дин.', flag: '🇷🇸' }, // 塞尔维亚
    RUB: { symbol: '₽', flag: '🇷🇺' }, // 俄罗斯
    RWF: { symbol: 'Fr', flag: '🇷🇼' }, // 卢旺达
    SAR: { symbol: 'ر.س', flag: '🇸🇦' }, // 沙特阿拉伯
    SBD: { symbol: '$', flag: '🇸🇧' }, // 所罗门群岛
    SCR: { symbol: '₨', flag: '🇸🇨' }, // 塞舌尔
    SDG: { symbol: 'ج.س.', flag: '🇸🇩' }, // 苏丹
    SEK: { symbol: 'kr', flag: '🇸🇪' }, // 瑞典
    SGD: { symbol: '$', flag: '🇸🇬' }, // 新加坡
    SHP: { symbol: '£', flag: '🇸🇭' }, // 圣赫勒拿岛
    SLL: { symbol: 'Le', flag: '🇸🇱' }, // 塞拉利昂
    SOS: { symbol: 'Sh', flag: '🇸🇴' }, // 索马里
    SRD: { symbol: '$', flag: '🇸🇷' }, // 苏里南
    SSP: { symbol: '£', flag: '🇸🇸' }, // 南苏丹
    STN: { symbol: 'Db', flag: '🇸🇹' }, // 圣多美和普林西比
    SYP: { symbol: 'ل.س', flag: '🇸🇾' }, // 叙利亚
    SZL: { symbol: 'L', flag: '🇸🇿' }, // 斯威士兰
    THB: { symbol: '฿', flag: '🇹🇭' }, // 泰国
    TJS: { symbol: 'SM', flag: '🇹🇯' }, // 塔吉克斯坦
    TMT: { symbol: 'm', flag: '🇹🇲' }, // 土库曼斯坦
    TND: { symbol: 'د.ت', flag: '🇹🇳' }, // 突尼斯
    TOP: { symbol: 'T$', flag: '🇹🇴' }, // 汤加
    TRY: { symbol: '₺', flag: '🇹🇷' }, // 土耳其
    TTD: { symbol: 'TT$', flag: '🇹🇹' }, // 特立尼达和多巴哥
    TVD: { symbol: '$', flag: '🇹🇻' }, // 图瓦卢
    TZS: { symbol: 'Sh', flag: '🇹🇿' }, // 坦桑尼亚
    UAH: { symbol: '₴', flag: '🇺🇦' }, // 乌克兰
    UGX: { symbol: 'Sh', flag: '🇺🇬' }, // 乌干达
    USD: { symbol: '$', flag: '🇺🇸' }, // 美国
    UYU: { symbol: '$', flag: '🇺🇾' }, // 乌拉圭
    UZS: { symbol: 'лв', flag: '🇺🇿' }, // 乌兹别克斯坦
    VEF: { symbol: 'Bs.', flag: '🇻🇪' }, // 委内瑞拉
    VND: { symbol: '₫', flag: '🇻🇳' }, // 越南
    VUV: { symbol: 'Vt', flag: '🇻🇺' }, // 瓦努阿图
    WST: { symbol: 'T', flag: '🇼🇸' }, // 萨摩亚
    XCD: { symbol: '$', flag: '🇬🇩' }, // 东加勒比
    XDR: { symbol: 'XDR', flag: '🇺🇳' }, // 特别提款权
    XPF: { symbol: '₣', flag: '🇵🇫' }, // 太平洋法属
    YER: { symbol: 'ر.ي', flag: '🇾🇪' }, // 也门
    ZAR: { symbol: 'R', flag: '🇿🇦' }, // 南非
    ZMW: { symbol: 'ZK', flag: '🇿🇲' }, // 赞比亚
    ZWL: { symbol: '$', flag: '🇿🇼' }, // 津巴布韦
    ARS: { symbol: '$', flag: '🇦🇷' }, // 阿根廷
    AUD: { symbol: 'A$', flag: '🇦🇺' }, // 澳大利亚
    BTN: { symbol: 'Nu', flag: '🇧🇹' }, // 不丹
    IQD: { symbol: 'ع.د', flag: '🇮🇶' }, // 伊拉克
    KGS: { symbol: 'сом', flag: '🇰🇬' }, // 吉尔吉斯斯坦
    KRW: { symbol: '₩', flag: '🇰🇷' }, // 韩国
    LSL: { symbol: 'L', flag: '🇱🇸' }, // 莱索托
    NGN: { symbol: '₦', flag: '🇳🇬' }, // 尼日利亚
    SLE: { symbol: 'Le', flag: '🇸🇱' }, // 塞拉利昂
    TWD: { symbol: 'NT$', flag: '🇹🇼' }, // 台湾
    VES: { symbol: 'Bs.S', flag: '🇻🇪' }, // 委内瑞拉
    XAF: { symbol: 'FCFA', flag: '🇨🇲' }, // 中非金融共同体法郎
    XOF: { symbol: 'CFA', flag: '🇧🇯' }, // 西非金融共同体法郎
};


async function init() {
    const response = await fetch(API_URL);
    const data = await response.json();
    rates = data.rates;
    populateBaseCurrency();
    populateAddCurrency();
    updateAll();
    document.getElementById('amount').addEventListener('input', updateAll);  // 添加实时更新的事件监听
}

        function populateBaseCurrency() {
            const select = document.getElementById('baseCurrency');
            select.innerHTML = getSortedCurrencyOptions();
            select.value = 'USD'; // 设置默认值为"USD"
        }

        function populateAddCurrency() {
            const select = document.getElementById('addCurrencySelect');
            select.innerHTML = `
                <option value="" disabled selected>选择货币</option>
                ${getSortedCurrencyOptions()}
            `;
        }

        function getSortedCurrencyOptions() {
            return Object.keys(rates)
                .sort((a, b) => {
                    const hasFlagA = CURRENCY_INFO[a]?.flag ? 0 : 1;
                    const hasFlagB = CURRENCY_INFO[b]?.flag ? 0 : 1;
                    if (hasFlagA !== hasFlagB) return hasFlagA - hasFlagB;
                    return a.localeCompare(b);
                })
                .map(code => `
                    <option value="${code}">
                        ${CURRENCY_INFO[code]?.flag || '🌍'} ${code}
                    </option>
                `).join('');
        }

        function updateAll() {
            const amount = parseFloat(document.getElementById('amount').value);
            const baseCurrency = document.getElementById('baseCurrency').value;

            document.getElementById('currencyList').innerHTML = currencies
                .map(code => {
                    const rate = rates[code] || 0;
                    const convertedAmount = (rate * amount).toFixed(2);
                    return `
                        <div class="row">
                            <div class="currency-code">${CURRENCY_INFO[code]?.flag || '🌍'} ${code}</div>
                            <div>${CURRENCY_INFO[code]?.symbol || ''} ${convertedAmount}</div>
                            <div class="rate">1 ${baseCurrency} = ${rate} ${code}</div>
                        </div>
                    `;
                }).join('');
        }

        function addCurrency() {
            const selectedCurrency = document.getElementById('addCurrencySelect').value;
            if (selectedCurrency && !currencies.includes(selectedCurrency)) {
                currencies.push(selectedCurrency);
                updateAll();
            }
        }

        function reset() {
            currencies = ['CNY', 'HKD', 'USD', 'EUR', 'GBP', 'JPY']; // 重置为默认货币
            document.getElementById('baseCurrency').value = 'USD'; // 重置基础货币
            document.getElementById('amount').value = 1; // 重置金额
            updateAll();
        }

        window.onload = init;
    </script>
</body>
</html>
